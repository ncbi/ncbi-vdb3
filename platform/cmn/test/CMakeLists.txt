include_directories( .. )
add_definitions( -DTESTING )

function( test stem )
    add_executable ( test-cmn-${stem} ${stem}-tst.cpp )
    target_link_libraries ( test-cmn-${stem} ${GTEST_LIBRARIES} kfc utf8proc ${LQUADMATH} )
    add_test ( NAME Cmn-${stem}-Test COMMAND test-cmn-${stem} )
endfunction()

# gtest white box tests
test(base64)
test(buffer)
test(buffmt)
test(dserial)
test(fmt)
test(kvp)
test(log)
test(nconv-sel)
test(nconv)
test(obj)
test(plog)
test(ptrace)
test(reader)
test(rsrc)
test(rsrc-log)
test(rsrc-trace)
test(serial)
test(str-buffer)
test(stream)
test(string)
test(text)
test(trace)
test(txt-writer)
test(writer)
